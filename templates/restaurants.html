<html>

<head>
	<link rel=stylesheet type=text/css href="{{ url_for('static', filename='styles.css') }}">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
	<script src="https://apis.google.com/js/platform.js?onload=start"></script>	
	<script>
		function signOut() {
			gapi.load('auth2', function() {
			    gapi.auth2.init({
			        client_id: '830596124419-uf7o77130d9edgev9agschcv0272c9i0.apps.googleusercontent.com',
			        scope: 'profile'
			    }).then(() => { 
			    	var auth2 = gapi.auth2.getAuthInstance();
			    	auth2.signOut().then(function () {
			    	  // console.log('User signed out.');

			    	  setTimeout(function() {
			    	    window.location.href = "/gdisconnect?status={{200}}";
			    	  }, 1);
			    	});
				})
			});
		}
	</script>
</head>


<body>
<h1>Restaurants</h1>

{% if 'username' in login_session %}
	<a href="#" onclick="signOut();">Log out</a>
{% else %}
	<a href="{{url_for('showLogin')}}">Log In</a>
{% endif %}


{% with messages = get_flashed_messages() %}    
{% if messages %}
<ul>
{% for message in messages %}
  <li><strong>{{message}}</strong></li>
  {% endfor %}
</ul>
{% endif %}
{% endwith %}


<div class="content">

{% for restaurant in restaurants %}
	<div class="restaurant">
		<div class="card card-shadow">
			<div class = "center title">
				<a href = "{{url_for('showRestaurant', restaurant_id = restaurant.id)}}"> <p>{{restaurant.name}}</p></a>
			</div>
			<div class="buttons">
				<a class="button" href = "{{url_for('editRestaurant',restaurant_id = restaurant.id)}}">Edit</a>
				<a class="button" href = "{{url_for('deleteRestaurant',restaurant_id = restaurant.id)}}">Delete</a>
			</div>
		</div>
	</div>
{% endfor %}

</div>
<hr>
<div id="new">
	<a  class="button" href="{{url_for('newRestaurant')}}" > Create a New Restaurant </a>
</div>
<footer>Made by <a href="https://www.linkedin.com/in/adel-a-abdelkader/">Adel Abdellatif</a></footer>
</body>

</html>
